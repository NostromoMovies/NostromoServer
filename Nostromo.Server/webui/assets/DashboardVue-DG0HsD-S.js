import{d as y,r as _,o as r,c,F as C,a as E,b as n,t as k,e as f,n as W,w as H,f as D,g as w,_ as $,h as g,i as U,j as s,k as l,l as S}from"./index-A5nK4w7Y.js";const J={class:"folder-tree"},K=["onClick"],O={key:0,class:"expand-icon"},Q={key:1,class:"expand-icon"},X={key:0,class:"subfolder-container"},Y=y({__name:"FolderTree",props:{items:{type:Array,required:!0},selectedFolder:{type:String,default:null}},emits:["select"],setup(h,{emit:m}){const u=m,d=async e=>{if(u("select",e.path),e.isExpanded=!e.isExpanded,!!e.isExpanded){e.isLoading=!0;try{const p=await fetch(`/api/folders?path=${encodeURIComponent(e.path)}`);if(!p.ok)throw new Error("Failed to load subfolders");const v=await p.json();v&&v.data&&Array.isArray(v.data.items)?e.subfolders=v.data.items.map(i=>({path:i.path,isExpanded:!1,isLoading:!1})):(console.error("Unexpected response format:",v),e.subfolders=[])}catch(p){console.error("Error loading subfolders:",p),e.subfolders=[]}finally{e.isLoading=!1}}},a=e=>e.split("/").pop()||e;return(e,p)=>{const v=_("folder-tree",!0);return r(),c("div",J,[(r(!0),c(C,null,E(h.items,i=>(r(),c("div",{key:i.path,class:"folder-item"},[n("div",{class:W(["folder-row",{selected:h.selectedFolder===i.path}]),onClick:H(o=>d(i),["stop"])},[i.isLoading?(r(),c("span",Q," ⋯ ")):(r(),c("span",O,k(i.isExpanded?"▼":"▶"),1)),f(" "+k(a(i.path)),1)],10,K),i.isExpanded?(r(),c("div",X,[i.subfolders?(r(),D(v,{key:0,items:i.subfolders,"selected-folder":h.selectedFolder,onSelect:p[0]||(p[0]=o=>e.$emit("select",o))},null,8,["items","selected-folder"])):w("",!0)])):w("",!0)]))),128))])}}}),Z=$(Y,[["__scopeId","data-v-4c8c0015"]]),ee={key:0,class:"popup"},te={class:"popup-content"},se={class:"folder-browser"},oe={class:"button-group"},ne=["disabled"],le=y({__name:"FolderCreationPopup",props:{show:{type:Boolean}},emits:["toggle-visibility"],setup(h,{emit:m}){const u=m,d=g([]),a=g(null),e=async()=>{try{const o=await fetch("/api/folders/Drives");if(!o.ok)throw new Error("Failed to load drives");const t=await o.json();t&&t.data&&Array.isArray(t.data.items)?d.value=t.data.items.map(x=>({path:x.path,isExpanded:!1,isLoading:!1})):(console.error("Unexpected response format:",t),d.value=[])}catch(o){console.error("Error loading drives:",o),d.value=[]}},p=o=>{a.value=o},v=async()=>{if(a.value)try{if(!(await fetch(`/api/folders/set?path=${encodeURIComponent(a.value)}`,{method:"GET"})).ok)throw new Error("Failed to set folder");console.log("Folder set successfully:",a.value),i()}catch(o){console.error("Error setting folder:",o)}},i=()=>{a.value=null,u("toggle-visibility",!1)};return U(e),(o,t)=>o.show?(r(),c("div",ee,[n("div",te,[n("button",{class:"close-button",onClick:i},"x"),t[0]||(t[0]=n("h2",{class:"title"},"Select Import Folder",-1)),n("div",se,[s(Z,{items:d.value,"selected-folder":a.value,onSelect:p},null,8,["items","selected-folder"])]),n("div",oe,[n("button",{class:"cancel",onClick:i},"Cancel"),n("button",{class:"select",disabled:!a.value,onClick:v}," Select ",8,ne)])])])):w("",!0)}}),ae=$(le,[["__scopeId","data-v-8ba96d99"]]),re={key:0,class:"text-center text-secondary"},ie=y({__name:"ImportFolderBox",setup(h){const m=g(!1),u=g(!1),d=g([]),a=g(null),e=o=>{m.value=o},p=async()=>{try{const o=await S.get("/api/folders/get-all");d.value=o.data}catch(o){console.error("Error fetching folders:",o)}},v=o=>{a.value=o,u.value=!0},i=async()=>{if(a.value)try{await S.get("/api/folders/remove",{params:{path:a.value}}),u.value=!1,p()}catch(o){console.error("Error removing folder:",o)}};return U(p),(o,t)=>{const x=_("v-card-title"),I=_("v-icon"),z=_("v-list-item-icon"),B=_("v-list-item-title"),L=_("v-list-item-content"),F=_("v-btn"),N=_("v-list-item-action"),P=_("v-list-item"),T=_("v-list"),A=_("v-card-text"),V=_("v-card"),j=_("v-spacer"),M=_("v-card-actions"),R=_("v-dialog"),q=_("v-container");return r(),D(q,null,{default:l(()=>[s(V,{class:"mb-4"},{default:l(()=>[s(x,null,{default:l(()=>t[3]||(t[3]=[f("Watched Folders")])),_:1}),s(A,null,{default:l(()=>[s(T,null,{default:l(()=>[(r(!0),c(C,null,E(d.value,(b,G)=>(r(),D(P,{key:G},{default:l(()=>[s(z,null,{default:l(()=>[s(I,null,{default:l(()=>t[4]||(t[4]=[f("mdi-folder")])),_:1})]),_:1}),s(L,null,{default:l(()=>[s(B,null,{default:l(()=>[f(k(b),1)]),_:2},1024)]),_:2},1024),s(N,null,{default:l(()=>[s(F,{icon:"",color:"error",onClick:Ve=>v(b)},{default:l(()=>[s(I,null,{default:l(()=>t[5]||(t[5]=[f("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),d.value.length===0?(r(),c("div",re," No watched folders found. ")):w("",!0)]),_:1})]),_:1}),s(F,{block:"",color:"primary",onClick:t[0]||(t[0]=b=>e(!0))},{default:l(()=>t[6]||(t[6]=[f("Add Folder")])),_:1}),s(ae,{show:m.value,onToggleVisibility:e},null,8,["show"]),s(R,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=b=>u.value=b),"max-width":"400px"},{default:l(()=>[s(V,null,{default:l(()=>[s(x,{class:"headline"},{default:l(()=>t[7]||(t[7]=[f(" Confirm Delete ")])),_:1}),s(A,null,{default:l(()=>[f(k(a.value),1)]),_:1}),s(M,null,{default:l(()=>[s(j),s(F,{variant:"text",onClick:t[1]||(t[1]=b=>u.value=!1)},{default:l(()=>t[8]||(t[8]=[f("Cancel")])),_:1}),s(F,{color:"red",variant:"text",onClick:i},{default:l(()=>t[9]||(t[9]=[f("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),ce=$(ie,[["__scopeId","data-v-0cc04810"]]),de={class:"unrecognized-files"},_e={class:"file-list"},ue=["onClick"],pe=y({__name:"UnrecognizedFiles",setup(h){const m=g([{id:1,timestamp:"2024-10-18 | 18:19",name:"File1.mkv"},{id:2,timestamp:"2024-10-18 | 18:18",name:"File2.mkv"},{id:3,timestamp:"2024-10-18 | 18:17",name:"File3.mkv"}]),u=d=>{console.log(`Action clicked for file ID: ${d}`)};return(d,a)=>(r(),c("div",de,[a[0]||(a[0]=n("h3",null,"Unrecognized Files",-1)),n("div",_e,[(r(!0),c(C,null,E(m.value,e=>(r(),c("button",{key:e.id,class:"file-item",onClick:p=>u(e.id)},[n("span",null,k(e.timestamp),1),n("span",null,k(e.name),1)],8,ue))),128))])]))}}),me=$(pe,[["__scopeId","data-v-08ac8562"]]),ve={class:"unrecognized-files"},fe={class:"file-list"},he=["onClick"],ge=y({__name:"DownloadProgress",setup(h){const m=g([{id:1,timestamp:"2024-10-18 | 18:19",status:"94%"},{id:2,timestamp:"2024-10-18 | 18:18",status:"Completed"},{id:3,timestamp:"2024-10-18 | 18:17",status:"Completed"}]),u=d=>{console.log(`Action clicked for file ID: ${d}`)};return(d,a)=>(r(),c("div",ve,[a[0]||(a[0]=n("h3",null,"Log",-1)),n("div",fe,[(r(!0),c(C,null,E(m.value,e=>(r(),c("button",{key:e.id,class:"file-item",onClick:p=>u(e.id)},[n("span",null,k(e.status),1),n("span",null,k(e.timestamp),1)],8,he))),128))])]))}}),ke=$(ge,[["__scopeId","data-v-74943642"]]),ye={class:"parent"},$e={class:"grid-container"},be={class:"rectangle"},xe={class:"content-wrapper"},Fe={class:"rectangle"},we={class:"rectangle"},Ce=y({__name:"DashboardSection",setup(h){return(m,u)=>(r(),c("div",ye,[n("div",$e,[n("div",be,[n("div",xe,[s(ce)])]),n("div",Fe,[s(me)]),n("div",we,[s(ke)])])]))}}),Ee=$(Ce,[["__scopeId","data-v-3306ef89"]]),De={class:"main-container"},Ie={class:"dashboard-section"},Ae=y({__name:"DashboardVue",setup(h){return(m,u)=>(r(),c("main",De,[n("section",Ie,[s(Ee)])]))}}),Ue=$(Ae,[["__scopeId","data-v-8eead4c5"]]);export{Ue as default};
